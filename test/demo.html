<!DOCTYPE html>
<html lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8">
    <title>Waveform.js Demo</title>
    <style>
      #container{
        width: 400px;
        height: 100px;
        display: block;
        margin: 200px auto;
        box-shadow: 0 0 10px black;

        background-color: orange;
        position: relative;
      }
      #container canvas {
        position: absolute;
        z-index: 51;
      }
      .progress {
        position: absolute;
        z-index: 50;
        width: 50%;
        height: 100%;
        background-color: green;

      }
    </style>
    <script src="vendor/jquery-1.7.2.js"></script>
    <script src="vendor/coffee-script.js"></script>
    <script>
      testdata = [[13,14,15,17,21,27,34,45,61,46,37,32,30,29,29,30,31,32,35,36,37,37,37,37,36,36,37,39,42,48,62,54,42,35,30,26,24,23,24,25,30,36,47,57,40,31,25,22,21,22,25,29,37,55,44,31,24,19,16,15,17,20,25,35,54,38,25,18,13,10,10,10,12,17,26,42,46,27,17,12,8,7,7,9,13,20,33,51,30,18,11,7,5,4,5,8,13,22,38,45,25,15,8,4,2,2,3,6,10,17,29,50,36,22,15,10,8,7,7,10,12,17,24,33,49,53,39,32,30,28,29,31,35,40,47,55,68,78,75,60,50,42,36,31,27,25,23,23,24,27,31,38,52,52,37,29,23,20,17,16,16,17,19,22,27,33,43,60,50,40,34,31,30,30,31,33,36,40,45,50,54,56,55,50,45,40,36,32,30,27,27,27,29,32,38,50,56,38,29,22,17,15,12,11,11,12,15,19,25,35,55,41,28,21,16,12,11,10,11,13,16,21,27,37,56,45,33,27,23,21,20,21,22,25,30,35,43,56,61,48,43,40,39,40,41,43,47,50,55,58,61,61,60,57,54,52,50,51,53,57,70,59,49,42,37,35,32,31,31,32,35,40,50,62,46,37,30,26,24,22,22,24,27,31,38,51,56,40,32,28,25,24,25,27,30,36,47,61,44,35,30,28,27,29,32,39,54,50,35,27,21,17,15,15,16,18,23,32,50,42,27,17,11,7,4,2,2,4,7,12,19,32,51,31,18,11,5,2,0,0,1,3,7,12,20,32,52,35,23,17,12,10,10,10,12,15,20,27,35,50,57,43,37,36,37,40,46,60,55,43,37,35,34,35,40,50,59,41,31,25,20,17,15,14,15,17,22,28,40,56,38,27,21,17,15,14,15,17,21,27,36,52,52,38,32,29,29,30,35,42,58,50,38,32,29,28,29,33,41,58,43,31,23,18,15,13,13,15,18,24,35,54,37,24,17,12,9,7,8,10,14,20,30,50,39,25,17,13,10,10,10,12,16,22,32,52,42,30,22,18,16,15,16,18,22,28,37,52,52,39,32,29,27,27,28,31,35,40,49,62,60,51,47,46,46,48,52,59,71,65,57,55,53,54,55,59,65,76,67,62,60,60,60,63,67,75,90,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,90,90,92,92,90,87,85,84,83,82,82,82,83,84,87,89,85,83,82,81,82,83,86,88,83,80,80,78,78,79,80,83,87,82,79,77,77,76,77,78,81,85,84,80,78,77,77,78,80,85,84,79,77,75,75,75,75,76,78,83,85,79,77,75,74,74,75,75,77,80,87,82,79,77,77,77,77,80,85,83,78,76,74,73,72,72,73,74,76,79,83,85,80,78,78,78,80,82,87,82,79,77,76,76,77,77,80,83,87,82,80,78,78,78,79,80,83,87,85,82,81,80,80,81,82,83,86,90,86,84,82,81,80,80,80,80,80,81,83,87,87,82,80,79,78,78,79,80,82,86,85,82,80,78,77,77,77,78,78,80,80,81,81,82,82,82,82,83,86,90,85,82,81,80,80,80,82,84,86,82,80,78,77,78,80,83,85,80,76,74,72,72,72,72,73,74,75,77,79,80,80,80,79,77,77,76,75,76,76,77,79,80,82,87,89,87,90,90,88,90,87,89,85,81,80,77,76,75,75,75,76,77,77,80,80,80,79,77,75,74,72,72,70,71,71,72,85,89,90,90,91,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,91,91,91,90,90,90,90,89,89,88,87,86,84,74,69,52,60,48,52,53,56,45,27,35,50,38,41,41,36,34,30,32,28,47,37,36,30,27,30,27,39,17,27,29,30,17,25,18,28,46,10,15,29,13,7,18,15,17,39,23,22,15,10,15,14,17,16,28,28,55,61,65,69,71,72,73,75,76,77,77,78,79,80,81,82,82,83,84,85,85,86,86,87,87,88,89,90,90,90,91,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92]][0];


    </script>
    <script>
      $(function(){
        CoffeeScript.load("../waveform.coffee?" + Math.random())
        window.waveform = new Waveform({
          container: $("#container")[0],
          background: "#ffffff",
          foreground: "transparent" // transparent
        });

        // 10000 random samples
        for(var i=0; i < 10000; i++){
          waveform.data.push(Math.random() / 1.5);
        }

        // testdata waveform
        for(var i=0; i< testdata.length; i++){
          testdata[i] = (100 - testdata[i]) / 100;
        }
        waveform.data = testdata;
        waveform.redraw();
        
        // recording samples
        recordingSamples = [];
        ti = 0;
        window.setInterval(function(){
          recordingSamples.push(testdata[ti]);
          waveform.setDataWithLimit(recordingSamples, testdata.length / 2);
          waveform.redraw()
          ti++;
        }, 50);
      });
    </script>
  </head>
  
  <body>
    <div id="container"><div class="progress"></div></div>

    <img src="http://w1.sndcdn.com/EQyi2vpPOMvG_m.png" style="width: 400px; height: auto; background-color: black; display: block; margin: 0px auto;" />
  </body>
</html>
